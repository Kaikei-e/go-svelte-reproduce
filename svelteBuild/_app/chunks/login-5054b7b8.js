import{r as a}from"./singletons-12a22614.js";import{I as l,C as i}from"./vendor-cdf618b7.js";const c=a,f=g;async function g(s,e){return c.goto(s,e,[])}const d={loading:!1,user:null},t=i(d);async function y(s){let e;if(await fetch("/api/v1/tryLogin",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json","Set-Cookie":"SameSite=none"},body:JSON.stringify(s),credentials:"include"}).then(o=>{o.ok?(console.log(o.json),e=o):(console.error("Response is bad. Server error : "+o),console.log(o.headers))}).catch(o=>console.error("Can't get the response properly : "+o)),e.ok){const o=await e.json();console.log(o);let n={id:o.userId,sessionToken:o.userToken};const r={loading:!1,user:n};t.set(r),console.log(l(t))}else console.log("Res is empty!!")}export{f as g,y as t,t as u};
