import{r}from"./singletons-12a22614.js";import{I as i,C as l}from"./vendor-cdf618b7.js";const c=r,m=u;async function u(s,o){return c.goto(s,o,[])}const g={loading:!1,user:null},t=l(g);async function f(s){let o;if(await fetch("/api/tryLogin",{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json","Set-Cookie":"SameSite=none"},body:JSON.stringify(s),credentials:"include"}).then(e=>{e.ok?o=e:(console.error("Response is bad. Server error : "+e),console.log(e.headers))}).catch(e=>console.error("Can't get the response properly : "+e)),o.ok){const e=await o.json();console.log(e);let n={email:e.userData.email,name:e.userData.name,sessionToken:e.userData.sessionToken};const a={loading:!1,user:n};t.set(a),console.log(i(t))}else console.log("Res is empty!!")}export{m as g,f as l,t as u};
